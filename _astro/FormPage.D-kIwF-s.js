var r=(e=>(e[e.TestThenControl=0]="TestThenControl",e[e.ControlThenTest=1]="ControlThenTest",e))(r||{});let a=!1;function C(e,n,t,o){let s=m();T(s,e),h(n,t,s,b(o))}function m(){return Math.random()<.5?r.ControlThenTest:r.TestThenControl}function T(e,n){const t=document.getElementById("option-a-video"),o=document.getElementById("option-b-video");t.setAttribute("src",n[e][0]),o.setAttribute("src",n[e][1])}const f={[r.ControlThenTest]:{"option-a":"Control","option-b":"Test","no-preference":"No Preference"},[r.TestThenControl]:{"option-a":"Test","option-b":"Control","no-preference":"No Preference"}};function h(e,n,t,o){document.getElementById("form").addEventListener("submit",u=>{if(u.preventDefault(),a)return;a=!0;let l=document.getElementById("submit-button");l.value="Submitting...",l.disabled=!0;let i=document.querySelector('input[name="option-select"]:checked');if(i!=null){let d=i.id,p=f[t][d];fetch(e,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:g(n,p)}).then(c=>window.location.replace(o)).catch(c=>console.log(c))}})}function g(e,n){let t=new FormData;return t.append(e,n),t}function b(e){let n=parseInt(new URLSearchParams(window.location.search).get("progress")),t="";return n===0?t+=e:t+="end",n++,t+="?progress="+n,t}export{r as C,C as s};
